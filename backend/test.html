<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>API 연결 테스트</title>
</head>
<body>

    <h1>FastAPI 백엔드 연결 테스트 페이지</h1>
    <p>'전송' 버튼을 누르고 개발자 도구(F12)의 Console 확인YO~.</p>
    
    <button onclick="sendApiRequest()">API 요청 전송</button>

    <script>
        // API 요청을 보내는 비동기 함수
        async function sendApiRequest() {
            // 백엔드로 보낼 테스트 데이터 
            const movieData = {
                title: "테스트 영화",
                director: "테스트 감독",
                release_date: "2025-10-18",
                quote_content: "이것은 테스트용 명대사입니다.",
                tags: ["테스트", "API"]
            };

            console.log("백엔드로 데이터를 전송합니다...", movieData);

            try {
                // fetch 함수를 사용해 API 요청
                const response = await fetch('http://localhost:8081/api/movies/', {
                    method: 'POST', // 요청 방식
                    headers: {
                        'Content-Type': 'application/json', // 보내는 데이터의 타입
                    },
                    body: JSON.stringify(movieData), // 데이터를 JSON 문자열로 변환
                });

                // 서버가 응답하지 않으면 에러 처리
                if (!response.ok) {
                    throw new Error(`서버 에러: ${response.status}`);
                }

                // 성공적인 응답을 JSON 형태로 변환
                const result = await response.json();
                
                console.log("성공적으로 응답을 받았습니다!", result);
                alert("성공! 브라우저 개발자 도구(F12)의 Console 탭을 확인요~.");

            } catch (error) {
                console.error(" API 요청 중 오류가 발생했습니다:", error);
                alert("실패! 브라우저 개발자 도구(F12)의 Console 탭에서 CORS 오류 등을 확인요~.");
            }
        }
    </script>

</body>
</html>